<%-include("partials/header")-%>

<div class="type" class="complaintType">
  <br><br><br><br><br>
  <h2>Welcome , <%= user.Name %></h2>
  <h3>Grievances received -</h3>
  <br><br>
  <% for(var i=0; i<grievance.length;i++){ %>

    <div class="card" style="margin-bottom:20px">
    <form action="/organization-emp/submit/<%= grievance[i]._id %>" method = "GET">

    <h3 class="card-header">Ministry: <%= grievance[i].Ministry %></h3>
    <div class="card-body">
      <h5 class="card-title" style="text-align:left;">Main Category: <%= grievance[i].Main_category %></h5>
      <br>
      <h5 class="card-title" style="text-align:left;">Sub Category: <%= grievance[i].Sub_category %></h5>
      <br>
      <h5 class="card-title" style="text-align:left;">Date Posted: <%= grievance[i].date_posted %></h5>
      <br>
      <h5 class="card-title" style="text-align:left;">Status: <%= grievance[i].status %></h5>
      <br>
      <h5 class="card-title" style="text-align:left;">Description:</h5><span>
      <p class="card-text" style="text-align:left;">
      <%= grievance[i].Description %>
      </p>
      <% if(typeof(grievance[i].uploadfile) != 'undefined'){ %>
        <iframe id="myFrame<%= i %>" style="display:none" width="600" height="300"></iframe>
        <input id='<%=grievance[i].uploadfile.filename%>' type="button" class="btn btn-primary myBtn" value="Open Uploaded File" onclick="openPdf(this,<%= i %>)" />
      <% } %>
      <br><br>
      <button type="submit" class="btn btn-primary myBtn">Update Status</button>
</form>
<br><br>
<form action="/organization-emp/user" method = "POST">
  <button type="submit" class="btn btn-primary myBtn">User Details</button>
  <input type="text" value="<%= grievance[i].user %>" name="userdetail" style="visibility: hidden;">
</form>
</div>
</div>
<% } %>

<style>


/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  position: relative;
  background-color: #fefefe;
  margin: auto;
  padding: 0;
  border: 1px solid #888;
  width: 80%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  -webkit-animation-name: animatetop;
  -webkit-animation-duration: 0.4s;
  animation-name: animatetop;
  animation-duration: 0.4s
}

/* Add Animation */
@-webkit-keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

@keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

/* The Close Button */
.close {
  color: white;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

.modal-header {
  padding: 2px 16px;
  background-color: #87dfd6;
  color: black;
}

.modal-body {padding: 2px 16px;}

.modal-footer {
  padding: 2px 16px;
  background-color: #87dfd6;
  color: black;
}
</style>
</head>
<body>

</div>
<script>
function openPdf(input , i){
  console.log(input.id)
  let omyFrame = document.getElementById("myFrame"+i);
  omyFrame.style.display="block";
  omyFrame.src = '../'+input.id;
}
</script>
<%-include("partials/footer")-%>
